*:/setwarp [$] = >>>
    _assertperm('restricted', 0)
    if(equals($, ''),
        msg(concat(color(red), 'Usage: /setwarp <name>')),
    #else:
        store_value(concat('warps.', @name), ploc())
        msg(concat(color(gray), 'Warp set!')))
<<<

*:/delwarp [$] = >>>
    _assertperm('restricted', 0)
    if(equals($, ''),
        msg(concat(color(red), 'Usage: /delwarp <name>')),
    #else:
        clear_value(concat('warps.', @name))
        msg(concat(color(gray), 'Warp deleted!')))
<<<

*:/warp [$] = >>>
    _assertperm('restricted', 1)
    
    assign(@o, concat('Available warps: ', color(gray)))
    
    if(equals($, ''),
        foreach(array_keys(get_values('warps')), @name,
            assign(@o, concat(@o, ' ', substr(@name, 6))))
        msg(@o),
    #else:
        assign(@found, 0)
        foreach(array_keys(get_values('warps')), @name,
            if(equals($, substr(@name, 6)),
                assign(@found, 1)
                set_ploc(get_value(@name))))
        if(equals(@found, 0),
            msg(concat(color(red), 'Warp not found!'))
            call_alias('/warp')))
<<<
